# REST API 参考

**[喵福禄][喵福禄]** API 采用 REST 架构，通过 [OAuth 2.0][OAuth 2.0] `Access Token` 进行身份验证，并返回 HTTP 响应状态码和 JSON 格式的响应。
您可以使用 喵福禄 的 REST API 来创建和管理您的工序流任务。

## 快速开始

### 1. 获取 APP ID 和 APP Secret

**[喵福禄][喵福禄]** 使用 APP ID 与 APP Secret 来验证 API 调用信息：

1. APP ID 用于识别您的应用信息
2. APP Secret 用于验证您的应用，您需要使用它和 APP ID 来交换 Access Token，以便调用其它 API

您可以按照以下步骤获取 APP ID 和 APP Secret：

1. 请登录您的 **[喵福禄][喵福禄-登录]** 账号。如果您还没有账号，请先[注册][喵福禄-注册]一个新账号
2. 进入 [REST API 文档][喵福禄-REST-API] 页面
3. 点击 `管理应用` 按钮，创建一个新的应用
4. 在创建应用页面中，请填写您的应用名称、回调地址等信息，然后点击 `创建应用` 按钮
5. 创建成功后，您将在页面中看到您的 APP ID 和 APP Secret，如下图所示：

![应用信息示例](1.quick-start.assets/image-20240914113739076.png)

> 温馨提示：
>
> 1. APP Secret 只会显示一次，请您务必妥善保管
> 2. 请不要将您的 APP Secret 泄露给他人，以免造成不必要的损失
> 3. 如果您的 APP Secret 不慎泄露，请及时在应用管理中更改
> 4. 如果您忘记了 APP Secret，可以在应用管理中重新生成

### 2. 获取 Access Token

在您开始使用 **[喵福禄][喵福禄]** 的 REST API 之前，需要先用您的 APP ID 和 APP secret 换取 `Access Token` 。 Access Token 将用于调用 REST API 时对您的应用进行身份验证。

> 温馨提示：
>
> 您可以使用您熟悉的任何编程语言来调用福禄喵 OAuth API 换取 Access Token

以下是使用 cURL 换取 Access Token 的示例，供您参考：

```bash
curl -X POST "https://api.meowflow.com.cn/open/v1/authentication/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=client_credentials&client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET"
```

需要替换代码

1. `YOUR_APP_ID`：替换为您的 APP ID

2. `YOUR_APP_SECRET`：替换为您的 APP secret

如果请求成功，您将收到一个 JSON 响应，其中包含 `access_token` 和 `token_type` 等信息

响应示例：

```json
{
  "code": 0,
  "message": "OK",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MjU4NzM0NzQsInN1YiI6IjE1MjA2Njg0MDM0NzA2MjI3MyIsImFwcElkIjoiMTUyMDY2ODQwMzQ3MDYyMjc1Iiwic2NvcGVzIjpbIndvcmtmbG93VGFzay5jcmVhdGUiLCJ3b3JrZmxvd1Rhc2sucmVhZCJdfQ.lMNLQCDfCE24f8FT3ixzDvB7rFtGLkC9wtBYyRF7IF8",
    "token_type": "Bearer",
    "expires_in": 7199,
    "scope": "workflowTask.write workflowTask.read",
    "app_id": "152066840347062275"
  }
}
```

当您进行 REST API 调用时，需要在 Authorization 标头中将 ACCESS_TOKEN 替换为你的 `Access Token` ：
`-H Authorization: Bearer <ACCESS_TOKEN>`。

当您的 `Access Token` 过期时，您需要再次调用 `/open/v1/authentication/token` 来换取新的 `Access Token` 。

## 3. 创建工序任务

使用 `Access Token`  调用 `创建工序流任务` API，创建一个工序任务

```bash
curl -X POST "https://api.meowflow.com.cn/open/v1/workflowTask" \
  -H "Authorization: Bearer ACCESS_TOKEN" \
  -H "Content-Type: application/json;charset=UTF-8" \
  -d '{
    "items": [
      {
        "workflowId": "string",
        "customId": "string",
        "data": {}
      }
    ]
  }'
```

注意事项与替换代码：

1. `ACCESS_TOKEN`：替换为您的 `Access Token`
2. `items`：替换为您的工序任务数据
3. 参数详情请参阅 [REST API 文档][喵福禄-REST-API]

<!--

TODO:: 修正所有文档中的链接，使其指向正确的页面

-->


[OAuth 2.0]: https://oauth.net/2/    "OAuth 2.0"

[喵福禄]: https://meowflow.com.cn/ "喵福禄"

[喵福禄-登录]: https://meowflow.com.cn/login/ "喵福禄-登录"

[喵福禄-注册]: https://meowflow.com.cn/register/ "喵福禄-注册"

[喵福禄-REST-API]: https://developer.meowflow.com.cn/ "REST API 文档"

